*--------------------------------------------------------------------------------------------------------------------------------------------------------
* (ES) AUTOGENERADO - ¡¡ATENCIÓN!! - ¡¡NO PENSADO PARA EJECUTAR!! USAR SOLAMENTE PARA INTEGRAR CAMBIOS Y ALMACENAR CON HERRAMIENTAS SCM!!
* (EN) AUTOGENERATED - ATTENTION!! - NOT INTENDED FOR EXECUTION!! USE ONLY FOR MERGING CHANGES AND STORING WITH SCM TOOLS!!
*--------------------------------------------------------------------------------------------------------------------------------------------------------
*< FOXBIN2PRG: Version="1.19" SourceFile="ka_cofletes.scx" /> (Solo para binarios VFP 9 / Only for VFP 9 binaries)
*
*
DEFINE CLASS dataenvironment AS dataenvironment 
 	*< CLASSDATA: Baseclass="dataenvironment" Timestamp="" Scale="" Uniqueid="" ClassIcon="1" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="Cursor3" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cursor4" UniqueID="" Timestamp="" />

	DataSource = .NULL.
	Height = 200
	Left = 1
	Name = "Dataenvironment"
	Top = 220
	Width = 520

	ADD OBJECT 'Cursor3' AS cursor WITH ;
		Alias = "fe_art", ;
		CursorSource = "fe_art", ;
		Database = ..\data\sisven.dbc, ;
		Height = 90, ;
		Left = 290, ;
		Name = "Cursor3", ;
		Top = 20, ;
		Width = 91
		*< END OBJECT: BaseClass="cursor" />

	ADD OBJECT 'Cursor4' AS cursor WITH ;
		Alias = "fe_prov", ;
		CursorSource = "fe_prov", ;
		Database = ..\data\sisven.dbc, ;
		Height = 90, ;
		Left = 10, ;
		Name = "Cursor4", ;
		Top = 140, ;
		Width = 91
		*< END OBJECT: BaseClass="cursor" />

ENDDEFINE

DEFINE CLASS forcfletes AS fmr OF "..\libs\sisven.vcx" 
 	*< CLASSDATA: Baseclass="form" Timestamp="" Scale="" Uniqueid="" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="Cmdcerraro" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Container1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Label1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="txtnumero" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grimodelos" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grimodelos.Column1.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grimodelos.Column1.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grimodelos.Column2.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grimodelos.Column2.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grimodelos.Column3.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grimodelos.Column3.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grimodelos.Column4.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grimodelos.Column4.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cmdlista" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grilista" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grilista.Column1.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grilista.Column1.Text1" UniqueID="" Timestamp="" />

	BorderStyle = 1
	Caption = "[Consulta Dctos.de Flete]"
	DoCreate = .T.
	Height = 379
	Left = 65
	Name = "forcfletes"
	Top = 6
	Width = 614

	ADD OBJECT 'Cmdcerraro' AS cmdcerraro WITH ;
		Height = 40, ;
		Left = 540, ;
		Name = "Cmdcerraro", ;
		TabIndex = 4, ;
		Top = 336, ;
		Width = 72
		*< END OBJECT: ClassLib="..\libs\sisfotos.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Cmdlista' AS cmdnuevocp WITH ;
		Caption = "", ;
		Enabled = .T., ;
		Height = 34, ;
		Left = 9, ;
		Name = "Cmdlista", ;
		Picture = ..\graphics\~ss00c.ico, ;
		TabIndex = 6, ;
		Top = 1, ;
		Width = 46
		*< END OBJECT: ClassLib="..\libs\sisfotos.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Container1' AS container WITH ;
		BackColor = 128,128,128, ;
		Height = 33, ;
		Left = 4, ;
		Name = "Container1", ;
		TabIndex = 5, ;
		Top = 2, ;
		Width = 200
		*< END OBJECT: BaseClass="container" />

	ADD OBJECT 'grilista' AS grid WITH ;
		BackColor = 174,202,180, ;
		ColumnCount = 1, ;
		DeleteMark = .F., ;
		FontName = "Tahoma", ;
		Height = 329, ;
		Left = 4, ;
		Name = "grilista", ;
		Panel = 1, ;
		ScrollBars = 2, ;
		TabIndex = 2, ;
		Themes = .F., ;
		Top = 37, ;
		Width = 184, ;
		Column1.BackColor = 174,202,180, ;
		Column1.FontName = "Tahoma", ;
		Column1.Name = "Column1", ;
		Column1.Width = 152
		*< END OBJECT: BaseClass="grid" />

	ADD OBJECT 'grilista.Column1.Header1' AS header WITH ;
		BackColor = 0,0,255, ;
		Caption = "Nº de Documentos", ;
		FontName = "Tahoma", ;
		ForeColor = 255,255,255, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'grilista.Column1.Text1' AS textbox WITH ;
		BackColor = 174,202,180, ;
		BorderStyle = 0, ;
		FontName = "Tahoma", ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1"
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'grimodelos' AS grid WITH ;
		BackColor = 174,202,210, ;
		ColumnCount = 4, ;
		DeleteMark = .F., ;
		FontName = "Tahoma", ;
		Height = 292, ;
		Left = 3, ;
		Name = "grimodelos", ;
		Panel = 1, ;
		ScrollBars = 2, ;
		TabIndex = 3, ;
		Top = 40, ;
		Width = 607, ;
		Column1.BackColor = 174,202,210, ;
		Column1.FontName = "Tahoma", ;
		Column1.Name = "Column1", ;
		Column1.Width = 294, ;
		Column2.BackColor = 174,202,210, ;
		Column2.FontName = "Tahoma", ;
		Column2.Name = "Column2", ;
		Column2.Width = 36, ;
		Column3.BackColor = 174,202,210, ;
		Column3.FontName = "Tahoma", ;
		Column3.Name = "Column3", ;
		Column3.Width = 55, ;
		Column4.BackColor = 174,202,210, ;
		Column4.FontName = "Tahoma", ;
		Column4.Name = "Column4", ;
		Column4.Width = 182
		*< END OBJECT: BaseClass="grid" />

	ADD OBJECT 'grimodelos.Column1.Header1' AS header WITH ;
		Caption = "Denominación", ;
		FontName = "Tahoma", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'grimodelos.Column1.Text1' AS textbox WITH ;
		BackColor = 174,202,210, ;
		BorderStyle = 0, ;
		FontName = "Tahoma", ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1"
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'grimodelos.Column2.Header1' AS header WITH ;
		Caption = "Unid.", ;
		FontName = "Tahoma", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'grimodelos.Column2.Text1' AS textbox WITH ;
		BackColor = 174,202,210, ;
		BorderStyle = 0, ;
		FontName = "Tahoma", ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1"
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'grimodelos.Column3.Header1' AS header WITH ;
		Caption = "Cantidad", ;
		FontName = "Tahoma", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'grimodelos.Column3.Text1' AS textbox WITH ;
		BackColor = 174,202,210, ;
		BorderStyle = 0, ;
		FontName = "Tahoma", ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1"
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'grimodelos.Column4.Header1' AS header WITH ;
		Caption = "Proveedor", ;
		FontName = "Tahoma", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'grimodelos.Column4.Text1' AS textbox WITH ;
		BackColor = 174,202,210, ;
		BorderStyle = 0, ;
		FontName = "Tahoma", ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1"
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Label1' AS label WITH ;
		BackColor = 128,128,128, ;
		Caption = "Nº:", ;
		FontName = "Tahoma", ;
		ForeColor = 255,255,255, ;
		Height = 16, ;
		Left = 60, ;
		Name = "Label1", ;
		TabIndex = 7, ;
		Top = 11, ;
		Width = 20
		*< END OBJECT: BaseClass="label" />

	ADD OBJECT 'txtnumero' AS textbox WITH ;
		FontName = "Tahoma", ;
		Height = 23, ;
		Left = 99, ;
		Name = "txtnumero", ;
		TabIndex = 1, ;
		Top = 7, ;
		Width = 100
		*< END OBJECT: BaseClass="textbox" />
	
	PROCEDURE Init
		IF !goapp.busca("fe_kar")
		   RETURN .f.
		ENDIF 
		IF !goapp.busca("fe_rcom")
		   RETURN .f.
		ENDIF 
		thisform.grilista.RecordSource=""
		thisform.grimodelos.RecordSource=""
	ENDPROC

	PROCEDURE grilista.Column1.Text1.KeyPress
		LPARAMETERS nKeyCode, nShiftAltCtrl
		DO CASE 
		   CASE nkeycode=13
		        thisform.grilista.Visible= .F. 
		        thisform.txtnumero.Value=ldctos.fndoc
		        thisform.grimodelos.RecordSource=""
		        SELECT fe_art.desc,fe_art.unid,fe_kar.cant,fe_prov.razo FROM;
		        fe_prov LEFT JOIN fe_kar LEFT JOIN fe_art ON fe_art.coda=fe_kar.coda;
		        ON fe_kar.fcodp=fe_prov.codp WHERE fndoc=ldctos.fndoc INTO CURSOR dproductos ORDER BY fe_art.desc
		        thisform.grimodelos.RecordSource="dproductos"
		   CASE nkeycode=7
		        thisform.txtnumero.SetFocus 
		ENDCASE
	ENDPROC

	PROCEDURE txtnumero.InteractiveChange
		thisform.grilista.RecordSource=""
		SELECT fndoc FROM fe_rcom WHERE !EMPTY(fndoc) INTO CURSOR ldctos ORDER BY fndoc
		thisform.grilista.RecordSource="ldctos"
	ENDPROC

ENDDEFINE
